<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Live Weather Dashboard ‚Äî Real-time weather data, 5-day forecast, hourly trends, and more for cities worldwide.">
    <title>Live Weather Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Lottie Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
</head>

<body>
    <!-- Dynamic Background -->
    <div id="bg-wrapper">
        <div id="bg-image" class="active"></div>
        <video id="bg-video" autoplay muted loop playsinline></video>
        <div id="bg-overlay"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner-container">
            <div id="lottie-container" class="lottie-container"></div>
            <span class="spinner-text">Fetching weather...</span>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="error-toast hidden">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="8" x2="12" y2="12" />
            <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
        <span id="error-message">Something went wrong</span>
    </div>

    <!-- Search Overlay -->
    <div id="search-overlay" class="search-overlay hidden">
        <div class="search-overlay-header">
            <div class="search-input-wrapper">
                <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <input type="text" id="search-input" placeholder="Enter location" autocomplete="off">
            </div>
            <button id="search-cancel" class="search-cancel-btn">Cancel</button>
        </div>
        <div id="search-results" class="search-results hidden"></div>
        <div id="popular-cities-section">
            <p class="popular-label">Popular cities</p>
            <div class="popular-cities-grid" id="popular-cities-grid"></div>
        </div>
    </div>

    <div id="app-container" class="app">
        <!-- Dashboard View -->
        <div id="dashboard-view">
            <!-- Header -->
            <header class="app-header">
                <h1 id="city-name" class="city-name">‚Äî</h1>
                <div class="header-actions">
                    <button id="unit-toggle" class="unit-toggle-btn" title="Toggle ¬∞C / ¬∞F">¬∞C</button>
                    <button id="current-location" class="icon-btn" title="Use current location">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path d="M12 2v2m0 16v2m10-10h-2M4 12H2" />
                        </svg>
                    </button>
                    <button onclick="window.location.href='ai.html'" class="icon-btn ai-btn" title="Smart AI Advisor">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--accent)"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M12 3l1.912 5.886h6.188l-5.007 3.638 1.913 5.885-5.006-3.637-5.006 3.637 1.913-5.885-5.007-3.638h6.188z" />
                        </svg>
                    </button>
                    <button id="open-search" class="icon-btn" title="Search city">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Alert Banner -->
            <div id="alert-banner" class="alert-banner hidden">
                <div class="alert-content">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <span id="alert-message">Alert Message</span>
                </div>
                <button class="alert-close"
                    onclick="document.getElementById('alert-banner').classList.add('hidden')">√ó</button>
            </div>

            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-temp-row">
                    <img id="hero-icon" class="hero-icon" src="" alt="weather icon">
                    <div class="hero-temp-block">
                        <span id="hero-temp" class="hero-temp">--</span>
                        <span class="hero-unit" id="hero-unit">¬∞C</span>
                    </div>
                </div>
                <div id="teddy-container" class="teddy-container"></div>
                <p id="hero-condition" class="hero-condition">‚Äî</p>
                <p id="hero-highlow" class="hero-highlow">H: --¬∞ &nbsp; L: --¬∞</p>
            </section>

            <!-- Outfit Card -->
            <section class="card outfit-card" id="outfit-dashboard-card">
                <div class="card-header">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M20.38 3.46L16 2a4 4 0 01-8 0L3.62 3.46a2 2 0 00-1.34 2.23l.58 3.47a1 1 0 00.99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 002-2V10h2.15a1 1 0 00.99-.84l.58-3.47a2 2 0 00-1.34-2.23z" />
                    </svg>
                    <span>Recommended Outfit</span>
                </div>
                <div id="outfit-summary" class="outfit-summary">
                    <div class="outfit-placeholder">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
                <button onclick="window.location.href='ai.html'" class="view-all-btn">View All</button>
            </section>

            <!-- 5-Day Forecast -->
            <section class="card forecast-card" id="forecast-card" style="margin-top: 96px;">
                <div class="card-header">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                        <line x1="16" y1="2" x2="16" y2="6" />
                        <line x1="8" y1="2" x2="8" y2="6" />
                        <line x1="3" y1="10" x2="21" y2="10" />
                    </svg>
                    <span>5-day forecast</span>
                </div>
                <div id="forecast-list" class="forecast-list"></div>
                <button id="view-14-day-btn" class="view-all-btn" style="display:none; margin-top:8px;">üìÖ View 14-Day
                    Forecast</button>
            </section>

            <!-- 24-Hour Forecast -->
            <section class="card hourly-card" id="hourly-card">
                <div class="card-header">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <polyline points="12 6 12 12 16 14" />
                    </svg>
                    <span>24-hour forecast</span>
                </div>
                <div class="hourly-scroll" id="hourly-scroll"></div>
            </section>

            <!-- Weather Map -->
            <section class="card map-card" id="map-card">
                <div class="card-header map-header">
                    <div class="map-header-left">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6" />
                            <line x1="8" y1="2" x2="8" y2="18" />
                            <line x1="16" y1="6" x2="16" y2="22" />
                        </svg>
                        <span>Weather Map</span>
                    </div>
                    <div class="map-controls">
                        <button class="map-btn active" data-layer="temp_new">üå° Temp</button>
                        <button class="map-btn" data-layer="precipitation_new">üåß Rain</button>
                        <button class="map-btn" data-layer="wind_new">üí® Wind</button>
                        <button class="map-btn" data-layer="clouds_new">‚òÅÔ∏è Clouds</button>
                    </div>
                </div>
                <div id="weather-map" class="weather-map"></div>
            </section>

            <button id="view-details-btn" class="view-all-btn"
                style="margin-top:12px; background:rgba(255,255,255,0.15);">More Details</button>
        </div>

        <!-- Details View -->
        <div id="details-view" class="hidden">
            <!-- Header -->
            <header class="app-header">
                <button id="back-to-dashboard" class="back-btn"
                    style="background:rgba(255,255,255,0.1); border:none; color:#fff; cursor:pointer; display:flex; align-items:center; gap:8px; padding:8px 16px; border-radius:20px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    <span>Dashboard</span>
                </button>
                <h1 class="city-name" id="city-name-details">Weather Details</h1>
                <div style="width:24px;"></div>
            </header>

            <div style="display: flex; flex-direction: column; gap: 24px;">
                <!-- Today's Overview -->
                <section class="card daily-insights-card">
                    <div class="card-header" style="padding: 20px 24px 0;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="5" />
                            <path
                                d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                        </svg>
                        <span>Today's Overview</span>
                    </div>
                    <div class="insights-grid">
                        <div class="insight-item">
                            <div class="insight-label">Day Length</div>
                            <div class="insight-value" id="day-length-val">-- hrs</div>
                            <div class="sun-arc-visual">
                                <div class="sun-arc-track"></div>
                                <div class="sun-position" id="sun-position-dot"></div>
                            </div>
                            <div class="sun-times">
                                <span id="insight-sunrise">--:--</span>
                                <span id="insight-sunset">--:--</span>
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-label">Precipitation</div>
                            <div class="insight-value" id="rain-prob-val">--%</div>
                            <div class="rain-bar-container">
                                <div class="rain-bar-track">
                                    <div id="rain-bar-fill" class="rain-bar-fill" style="width:0%;"></div>
                                </div>
                            </div>
                            <div class="detail-sub-label" id="rain-amt-val" style="margin-top:10px;">-- mm expected
                            </div>
                        </div>
                    </div>
                    <div id="insight-message"
                        style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 1rem; opacity: 0.9; font-weight: 500; text-align: center; color: var(--text-primary);">
                        Thinking about the weather...
                    </div>
                </section>

                <!-- Environmental Grid -->
                <section class="env-grid">
                    <div class="card env-card">
                        <div class="card-header"><span>üåø Air Quality</span></div>
                        <div class="aqi-container">
                            <svg class="aqi-gauge" viewBox="0 0 100 50">
                                <path d="M10,50 A40,40 0 0,1 90,50" fill="none" stroke="rgba(255,255,255,0.1)"
                                    stroke-width="5" />
                                <path id="aqi-fill" class="aqi-fill" d="M10,50 A40,40 0 0,1 90,50" fill="none"
                                    stroke="#4ade80" stroke-width="5" />
                            </svg>
                            <div class="aqi-value-text"><span id="aqi-value" class="aqi-status">--</span></div>
                        </div>
                        <span id="aqi-text" class="aqi-sub" style="margin-top:10px; font-size:0.9rem;">--</span>
                    </div>
                    <div class="card env-card">
                        <div class="card-header"><span>üå´Ô∏è Visibility</span></div>
                        <div class="detail-value" id="vis-value">-- km</div>
                        <div class="detail-sub-label" id="cloud-value" style="margin-top:5px; opacity:0.7;">Clouds: --%
                        </div>
                        <div class="pollen-bar"
                            style="margin-top:8px; width:60px; height:4px; background:rgba(255,255,255,0.1); border-radius:2px;">
                            <div id="cloud-bar" class="pollen-fill"
                                style="width:0%; height:100%; background:#fff; border-radius:2px;"></div>
                        </div>
                    </div>
                    <div class="card env-card">
                        <div class="card-header"><span>üåë Astronomy</span></div>
                        <div class="moon-visual" id="moon-icon" style="font-size:3rem; margin:10px 0;">üåë</div>
                        <div class="detail-sub-label" id="moon-text" style="font-weight:600;">New Moon</div>
                    </div>
                    <div class="card env-card">
                        <div class="card-header"><span>üå°Ô∏è RealFeel</span></div>
                        <div class="detail-value" id="realfeel-value">--¬∞</div>
                        <div class="detail-sub-label" style="opacity:0.7;">Feels like</div>
                    </div>
                    <div class="card env-card">
                        <div class="card-header"><span>üåæ Pollen</span></div>
                        <div id="pollen-list" class="pollen-list" style="opacity:0.6; font-size:0.85rem;">Low Risk</div>
                    </div>
                </section>

                <!-- Metric Grid -->
                <section class="detail-grid">
                    <div class="card detail-card" id="uv-card">
                        <span class="detail-label">UV Index</span>
                        <div class="gauge-ring" id="uv-gauge">
                            <svg viewBox="0 0 100 100" class="gauge-svg">
                                <circle cx="50" cy="50" r="40" class="gauge-track" />
                                <circle cx="50" cy="50" r="40" class="gauge-fill uv-fill" id="uv-fill" />
                            </svg>
                            <div class="gauge-center-content">
                                <span class="detail-value" id="uv-value">‚Äî</span>
                                <span class="gauge-center-icon">‚òÄÔ∏è</span>
                            </div>
                        </div>
                    </div>
                    <div class="card detail-card" id="humidity-card">
                        <span class="detail-label">Humidity</span>
                        <div class="gauge-ring" id="humidity-gauge">
                            <svg viewBox="0 0 100 100" class="gauge-svg">
                                <circle cx="50" cy="50" r="40" class="gauge-track" />
                                <circle cx="50" cy="50" r="40" class="gauge-fill humidity-fill" id="humidity-fill" />
                            </svg>
                            <div class="gauge-center-content">
                                <span class="detail-value" id="humidity-value">‚Äî</span>
                                <span class="gauge-center-icon">üíß</span>
                            </div>
                        </div>
                    </div>
                    <div class="card detail-card" id="pressure-card">
                        <span class="detail-label">Pressure</span>
                        <div class="gauge-ring" id="pressure-gauge">
                            <svg viewBox="0 0 100 100" class="gauge-svg">
                                <circle cx="50" cy="50" r="40" class="gauge-track" />
                                <circle cx="50" cy="50" r="40" class="gauge-fill pressure-fill" id="pressure-fill" />
                            </svg>
                            <div class="gauge-center-content">
                                <span class="detail-value" id="pressure-value">‚Äî</span>
                                <span class="pressure-unit-label">hPa</span>
                            </div>
                        </div>
                    </div>
                    <div class="card detail-card" id="wind-card">
                        <span class="detail-label" id="wind-dir-label">Wind</span>
                        <span class="detail-value" id="wind-value" style="font-size:2.5rem;">‚Äî</span>
                        <div class="compass-container" style="transform:scale(1.1);">
                            <div class="compass">
                                <span class="compass-label n">N</span>
                                <span class="compass-label e">E</span>
                                <span class="compass-label s">S</span>
                                <span class="compass-label w">W</span>
                                <div class="compass-needle" id="wind-needle"></div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Data provided by <strong>OpenWeatherMap</strong></p>
        </footer>
    </div>

    <!-- Modals -->
    <div id="forecast-overlay" class="overlay hidden">
        <div class="overlay-content full-screen-mobile">
            <div class="overlay-header">
                <h3>14-Day Forecast</h3>
                <button class="close-btn"
                    onclick="document.getElementById('forecast-overlay').classList.add('hidden')">√ó</button>
            </div>
            <div id="forecast-list-14" class="forecast-list-extended"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="backgrounds.js"></script>
    <script src="app.js"></script>
</body>

</html>