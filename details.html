<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Lottie Animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
</head>

<body class="details-page">
    <!-- Dynamic Background -->
    <div id="bg-wrapper">
        <div id="bg-image" class="active"></div>
        <video id="bg-video" autoplay muted loop playsinline></video>
        <div id="bg-overlay"></div>
    </div>

    <div class="app">
        <!-- Header -->
        <header class="app-header">
            <a href="index.html" class="back-btn"
                style="text-decoration:none; display:flex; align-items:center; gap:8px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                <span>Dashboard</span>
            </a>
            <h1 class="city-name" id="city-name-details">Weather Details</h1>
            <div style="width:24px;"></div> <!-- Spacer -->
        </header>

        <!-- Main Grid Layout -->
        <div style="display: flex; flex-direction: column; gap: 24px;">

            <!-- Phase 3: Daily Insights (Hero Card) -->
            <section class="card daily-insights-card">
                <div class="card-header" style="padding: 20px 24px 0;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5" />
                        <path
                            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                    </svg>
                    <span>Today's Overview</span>
                </div>
                <div class="insights-grid">
                    <!-- Sun Arc -->
                    <div class="insight-item">
                        <div class="insight-label">Day Length</div>
                        <div class="insight-value" id="day-length-val">-- hrs</div>
                        <div class="sun-arc-visual">
                            <div class="sun-arc-track"></div>
                            <div class="sun-position" id="sun-position-dot"></div>
                        </div>
                        <div class="sun-times">
                            <span id="insight-sunrise">--:--</span>
                            <span id="insight-sunset">--:--</span>
                        </div>
                    </div>

                    <!-- Rain Bar -->
                    <div class="insight-item">
                        <div class="insight-label">Precipitation</div>
                        <div class="insight-value" id="rain-prob-val">--%</div>
                        <div class="rain-bar-container">
                            <div class="rain-bar-track">
                                <div id="rain-bar-fill" class="rain-bar-fill" style="width:0%;"></div>
                            </div>
                        </div>
                        <div class="detail-sub-label" id="rain-amt-val" style="margin-top:10px;">-- mm expected</div>
                    </div>
                </div>
                <!-- Positive Insight Message -->
                <div id="insight-message"
                    style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 1rem; opacity: 0.9; font-weight: 500; text-align: center; color: var(--text-primary);">
                    Thinking about the weather...
                </div>
            </section>

            <!-- Phase 1: Environmental Details (Grid) -->
            <section class="env-grid">
                <!-- Air Quality -->
                <div class="card env-card">
                    <div class="card-header">
                        <span>üåø Air Quality</span>
                    </div>
                    <div class="aqi-container">
                        <svg class="aqi-gauge" viewBox="0 0 100 50">
                            <path d="M10,50 A40,40 0 0,1 90,50" fill="none" stroke="rgba(255,255,255,0.1)"
                                stroke-width="5" />
                            <path id="aqi-fill" class="aqi-fill" d="M10,50 A40,40 0 0,1 90,50" fill="none"
                                stroke="#4ade80" stroke-width="5" stroke-dasharray="0 251.2" />
                        </svg>
                        <div class="aqi-value-text">
                            <span id="aqi-value" class="aqi-status">--</span>
                        </div>
                    </div>
                    <span id="aqi-text" class="aqi-sub" style="margin-top:10px; font-size:0.9rem;">--</span>
                </div>

                <!-- Visibility -->
                <div class="card env-card">
                    <div class="card-header">
                        <span>üå´Ô∏è Visibility</span>
                    </div>
                    <div class="detail-value" id="vis-value">-- km</div>
                    <div class="detail-sub-label" id="cloud-value" style="margin-top:5px; opacity:0.7;">Clouds: --%
                    </div>
                    <div class="pollen-bar"
                        style="margin-top:8px; width:60px; height:4px; background:rgba(255,255,255,0.1); border-radius:2px;">
                        <div id="cloud-bar" class="pollen-fill"
                            style="width:0%; height:100%; background:#fff; border-radius:2px;"></div>
                    </div>
                </div>

                <!-- Moon Phase -->
                <div class="card env-card">
                    <div class="card-header">
                        <span>üåë Astronomy</span>
                    </div>
                    <div class="moon-visual" id="moon-icon" style="font-size:3rem; margin:10px 0;">üåë</div>
                    <div class="detail-sub-label" id="moon-text" style="font-weight:600;">New Moon</div>
                </div>

                <!-- RealFeel (NEW) -->
                <div class="card env-card">
                    <div class="card-header">
                        <span>üå°Ô∏è RealFeel</span>
                    </div>
                    <div class="detail-value" id="realfeel-value">--¬∞</div>
                    <div class="detail-sub-label" style="opacity:0.7;">Feels like</div>
                </div>

                <!-- Pollen (Placeholder) -->
                <div class="card env-card">
                    <div class="card-header">
                        <span>üåæ Pollen</span>
                    </div>
                    <div id="pollen-list" class="pollen-list" style="opacity:0.6; font-size:0.85rem;">
                        Low Risk
                    </div>
                </div>
            </section>


            <!-- Metric Grid (Pressure, UV, etc) -->
            <section class="detail-grid">
                <!-- UV Index -->
                <div class="card detail-card" id="uv-card">
                    <span class="detail-label">UV Index</span>
                    <div class="gauge-ring" id="uv-gauge">
                        <svg viewBox="0 0 100 100" class="gauge-svg">
                            <circle cx="50" cy="50" r="40" class="gauge-track" />
                            <circle cx="50" cy="50" r="40" class="gauge-fill uv-fill" id="uv-fill" />
                        </svg>
                        <div class="gauge-center-content">
                            <span class="detail-value" id="uv-value">‚Äî</span>
                            <span class="gauge-center-icon">‚òÄÔ∏è</span>
                        </div>
                    </div>
                </div>

                <!-- Humidity -->
                <div class="card detail-card" id="humidity-card">
                    <span class="detail-label">Humidity</span>
                    <div class="gauge-ring" id="humidity-gauge">
                        <svg viewBox="0 0 100 100" class="gauge-svg">
                            <circle cx="50" cy="50" r="40" class="gauge-track" />
                            <circle cx="50" cy="50" r="40" class="gauge-fill humidity-fill" id="humidity-fill" />
                        </svg>
                        <div class="gauge-center-content">
                            <span class="detail-value" id="humidity-value">‚Äî</span>
                            <span class="gauge-center-icon">üíß</span>
                        </div>
                    </div>
                </div>

                <!-- Pressure -->
                <div class="card detail-card" id="pressure-card">
                    <span class="detail-label">Pressure</span>
                    <div class="gauge-ring" id="pressure-gauge">
                        <svg viewBox="0 0 100 100" class="gauge-svg">
                            <circle cx="50" cy="50" r="40" class="gauge-track" />
                            <circle cx="50" cy="50" r="40" class="gauge-fill pressure-fill" id="pressure-fill" />
                        </svg>
                        <div class="gauge-center-content">
                            <span class="detail-value" id="pressure-value">‚Äî</span>
                            <span class="pressure-unit-label">hPa</span>
                        </div>
                    </div>
                </div>

                <!-- Wind -->
                <div class="card detail-card" id="wind-card">
                    <span class="detail-label" id="wind-dir-label">Wind</span>
                    <span class="detail-value" id="wind-value" style="font-size:2.5rem;">‚Äî</span>
                    <div class="compass-container" style="transform:scale(1.1);">
                        <div class="compass">
                            <span class="compass-label n">N</span>
                            <span class="compass-label e">E</span>
                            <span class="compass-label s">S</span>
                            <span class="compass-label w">W</span>
                            <div class="compass-needle" id="wind-needle"></div>
                        </div>
                    </div>
                </div>

                <!-- Sunrise / Sunset -->
                <div class="card detail-card" id="sunset-card">
                    <span class="detail-label">‚òÄÔ∏è Sunrise / Sunset</span>
                    <span class="detail-value" id="sunset-value" style="font-size:1.6rem;">‚Äî</span>
                    <svg viewBox="0 0 120 70" style="width:100%; margin:8px 0; overflow:visible;">
                        <path d="M10,60 A50,50 0 0,1 110,60" fill="none" stroke="rgba(255,255,255,0.1)"
                            stroke-width="3" />
                        <path id="sun-arc-progress" d="M10,60 A50,50 0 0,1 110,60" fill="none" stroke="#facc15"
                            stroke-width="3" stroke-dasharray="0 157" stroke-linecap="round"
                            style="transition: stroke-dasharray 1.5s ease;" />
                        <circle id="sun-dot" cx="10" cy="60" r="5" fill="#facc15"
                            style="filter:drop-shadow(0 0 6px #facc15); transition: cx 1.5s ease, cy 1.5s ease;" />
                    </svg>
                    <div
                        style="display:flex; justify-content:space-between; width:100%; font-size:0.75rem; color:var(--text-muted); margin-top:auto;">
                        <span>üåÖ <span id="sunrise-time">--:--</span></span>
                        <span>üåá <span id="sunset-time-label">--:--</span></span>
                    </div>
                </div>
            </section>

        </div>
    </div>


    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner-container">
            <div id="lottie-container" class="lottie-container"></div>
            <p class="loading-text">Fetching weather details...</p>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="error-toast hidden">
        <span id="error-message">Something went wrong.</span>
    </div>

    <script src="backgrounds.js"></script>
    <script src="details.js"></script>
</body>

</html>